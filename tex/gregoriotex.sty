%GregorioTeX file.
%Copyright (C) 2007 Elie Roux <elie.roux@telecom-bretagne.eu>
%
%This program is free software: you can redistribute it and/or modify
%it under the terms of the GNU General Public License as published by
%the Free Software Foundation, either version 3 of the License, or
%(at your option) any later version.
%
%This program is distributed in the hope that it will be useful,
%but WITHOUT ANY WARRANTY; without even the implied warranty of
%MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%GNU General Public License for more details.
%
%You should have received a copy of the GNU General Public License
%along with this program.  If not, see <http://www.gnu.org/licenses/>.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{gregoriotex}%
    [2010/09/27 v2.1 GregorioTeX system.]
\RequirePackage{xcolor}

\input gregoriotex.tex

\DeclareOption{debug}{\debugtrue}
\ExecuteOptions{}
\ProcessOptions\relax

% we hide lines only under LaTeX
\GreHideAltLines
\GreHidePCLines

\definecolor{grebackgroundcolor}{RGB}{255,255,255}%

\def\greinitialformat#1{%
  \begin{huge}#1\end{huge}%
  \relax %
}

\def\grebiginitialformat#1{%
  \begin{Huge}#1\end{Huge}%
  \relax %
}

\def\greitalic#1{%
  \textit{#1}%
  \relax %
}

\def\gresmallcaps#1{%
  \textsc{#1}%
  \relax %
}

\def\greboldfont#1{%
  \textbf{#1}%
  \relax %
}

\def\grett#1{%
  \texttt{#1}%
  \relax %
}

\def\greul#1{%
  \underline{#1}%
  \relax %
}

\definecolor{gregoriocolor}{RGB}{229,53,44}

\def\grecolored#1{
  {%
    \color{gregoriocolor}#1%
  }%
}

\def\grecoloredlines#1#2#3{%
  \definecolor{gretempcolor}{RGB}{#1,#2,#3}%
  \GreSetStaffLinesFormat{%
  \color{gretempcolor}%
  }%  
  \relax %
}

\def\greredlines{%
  \grecoloredlines{229}{53}{44}%
  \relax %
}

\let\redlines\greredlines

\def\grenormallines{%
  \global\def\grestafflinesformat{}
  \relax %
}

\let\normallines\grenormallines

\def\greabovelinestextstyle#1{%
  \small\textit{#1}%
  \relax %
}

% keep this here, but \writemode may be deprecated at some point
\def\writemode#1{%
  \gresetfirstlineaboveinitial{\textsc{\textbf{#1}}}{\textsc{\textbf{#1}}}%
  \relax %
}

% opening and closing of the aux file. We can't do it another way,
% because of the case of several scores.
\AtBeginDocument{\opengreaux }
\AtEndDocument{\closegreaux }
